{% extends 'base.html' %}
{% block content %}
<h2>Students</h2>
<form method="post">
    <label for="person_id">Person:</label>
    <select name="person_id" required>
        {% for p in persons %}
        <option value="{{ p.person_id }}">{{ p.first_name }} {{ p.last_name }} (ID: {{ p.person_id }})</option>
        {% endfor %}
    </select>

    <label for="course_id">Course ID:</label>
    <select name="course_id" required>
        {% for c in courses %}
        <option value="{{ c.course_id }}">{{ c.course_name }} (ID: {{ c.course_id }})</option>
        {% endfor %}
    </select>

    <select name="position_type">
        <option value="REGULAR">REGULAR</option>
        <option value="ALUMNI">ALUMNI</option>
        <option value="EXCHANGE">EXCHANGE</option>
    </select>

    <input name="start_date" type="date">
    <input name="end_date" type="date">

    <button type="submit">Add</button>
</form>

<table>
    <tr>
        <th>ID</th>
        <th>Person</th>
        <th>Course</th>
        <th>Position Type</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Actions</th>
    </tr>
    {% for s, p, c in students %}
    <tr>
        <td>{{ s.student_id }}</td>
        <td>{{ p.first_name }} {{ p.last_name }}</td>
        <td>{{ c.course_name }}</td>
        <td>{{ s.position_type }}</td>
        <td>{{ s.start_date }}</td>
        <td>{{ s.end_date }}</td>
        <td>
            <form action="/students/{{ s.student_id }}/delete" method="post">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
