{% extends 'base.html' %}
{% block content %}
<h2>Persons</h2>

<button onclick="showForm()">New Person</button>

<div id="list-view">
    <table>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>National ID</th>
            <th>DOB</th>
            <th>Username</th>
            <th>Personal email</th>
            <th>Org email</th>
            <th>Actions</th>
        </tr>
        {% for p in persons %}
        <tr>
            <td>{{ p.person_id }}</td>
            <td>{{ p.first_name }}</td>
            <td>{{ p.last_name }}</td>
            <td>{{ p.id_number }}</td>
            <td>{{ p.dob }}</td>
            <td>{{ p.username }}</td>
            <td>{{ p.personal_email }}</td>
            <td>{{ p.org_email }}</td>
            <td>
                <button type="button" onclick="editPerson({{ p.person_id }}, '{{ p.first_name }}', '{{ p.last_name }}', '{{ p.id_number }}', '{{ p.dob }}', '{{ p.personal_email }}')">Edit</button>
                <form action="/persons/{{ p.person_id }}/delete" method="post" style="display:inline;">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>    
</div>

<div id="form-view" style="display: none; margin-top: 20px;">
    <form method="post" id="personForm">
        <input type="hidden" name="person_id" id="person_id">
        <input name="first_name" placeholder="First Name" required>
        <input name="last_name" placeholder="Last Name" required>
        <input name="id_number" placeholder="National ID" required>
        <input name="dob" type="date" placeholder="Date of Birth">
        <input name="personal_email" placeholder="Personal email">
        <button type="submit">Submit</button>
        <button type="button" onclick="hideForm()">Cancel</button>
    </form>
</div>

<script src="{{ url_for('static', filename='js/toggleViews.js') }}"></script>
{% endblock %}
